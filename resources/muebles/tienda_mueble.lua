tiendaMuebles = {
    [0] = {
        [1] = {
            IDMueble = 1741,
            Nombre = "Armario 1",
            Precio = 1500000
        },
        [2] = {
            IDMueble = 2167,
            Nombre = "Armario 2",
            Precio = 1700000
        },
        [3] = {
            IDMueble = 2025,
            Nombre = "Armario 3",
            Precio = 1400000
        },
        [4] = {
            IDMueble = 2131,
            Nombre = "Armario 4",
            Precio = 1650000
        },
        [5] = {
            IDMueble = 2133,
            Nombre = "Armario 5",
            Precio = 2000000
        },
        [6] = {
            IDMueble = 2336,
            Nombre = "Armario 6",
            Precio = 2000000
        }
    },
    [1] = {
        [1] = {
            IDMueble = 1700,
            Nombre = "Cama 1",
            Precio = 1300000
        },
        [2] = {
            IDMueble = 1701,
            Nombre = "Cama 2",
            Precio = 1500000
        },
        [3] = {
            IDMueble = 1725,
            Nombre = "Cama 3",
            Precio = 2300000
        },
        [4] = {
            IDMueble = 1794,
            Nombre = "Cama 4",
            Precio = 1500000
        },
        [5] = {
            IDMueble = 1798,
            Nombre = "Cama 5",
            Precio = 1700000
        },
        [6] = {
            IDMueble = 2299,
            Nombre = "Cama 6",
            Precio = 1000000
        },
        [7] = {
            IDMueble = 2603,
            Nombre = "Cama 7",
            Precio = 1650000
        },
        [8] = {
            IDMueble = 2302,
            Nombre = "Cama 8",
            Precio = 1550000
        },
        [9] = {
            IDMueble = 14866,
            Nombre = "Cama 9",
            Precio = 1000000
        },
        [10] = {
            IDMueble = 2300,
            Nombre = "Cama 10",
            Precio = 2300000
        },
        [11] = {
            IDMueble = 2301,
            Nombre = "Cama 11",
            Precio = 1300000
        },
        [12] = {
            IDMueble = 2090,
            Nombre = "Cama 12",
            Precio = 2350000
        },
        [13] = {
            IDMueble = 14446,
            Nombre = "Cama 13",
            Precio = 1000000
        },
        [14] = {
            IDMueble = 2298,
            Nombre = "Cama 14",
            Precio = 1100000
        },
        [15] = {
            IDMueble = 1812,
            Nombre = "Cama 15",
            Precio = 1120000
        },
        [16] = {
            IDMueble = 1797,
            Nombre = "Cama 16",
            Precio = 1100000
        },
        [17] = {
            IDMueble = 1745,
            Nombre = "Cama 17",
            Precio = 2350000
        },
        [18] = {
            IDMueble = 1793,
            Nombre = "Cama 18",
            Precio = 2350000
        },
        [19] = {
            IDMueble = 1796,
            Nombre = "Cama 19",
            Precio = 2350000
        },
        [20] = {
            IDMueble = 1795,
            Nombre = "Cama 20",
            Precio = 1100000
        },
        [21] = {
            IDMueble = 1799,
            Nombre = "Cama 21",
            Precio = 1250000
        },
        [22] = {
            IDMueble = 1800,
            Nombre = "Cama 22",
            Precio = 1100000
        },
        [23] = {
            IDMueble = 1801,
            Nombre = "Cama 23",
            Precio = 2600000
        },
        [24] = {
            IDMueble = 1802,
            Nombre = "Cama 24",
            Precio = 1100000
        },
        [25] = {
            IDMueble = 1803,
            Nombre = "Cama 25",
            Precio = 1100000
        },
        [26] = {
            IDMueble = 14861,
            Nombre = "Cama 26",
            Precio = 1100000
        },
        [27] = {
            IDMueble = 2575,
            Nombre = "Cama 27",
            Precio = 1100000
        },
        [28] = {
            IDMueble = 1646,
            Nombre = "Cama 28",
            Precio = 1100000
        }
    },

    [2] = {
        [1] = {
            IDMueble = 2290,
            Nombre = "Sofa 1",
            Precio = 2100000
        },
        [2] = {
            IDMueble = 1768,
            Nombre = "Sofa 2",
            Precio = 1800000
        },
        [3] = {
            IDMueble = 1766,
            Nombre = "Sofa 3",
            Precio = 2100000
        },
        [4] = {
            IDMueble = 1764,
            Nombre = "Sofa 4",
            Precio = 1800000
        },
        [5] = {
            IDMueble = 1763,
            Nombre = "Sofa 5",
            Precio = 2100000
        },
        [6] = {
            IDMueble = 1761,
            Nombre = "Sofa 6",
            Precio = 2100000
        },
        [7] = {
            IDMueble = 1760,
            Nombre = "Sofa 7",
            Precio = 1300000
        },
        [8] = {
            IDMueble = 1757,
            Nombre = "Sofa 8",
            Precio = 1680000
        },
        [9] = {
            IDMueble = 1756,
            Nombre = "Sofa 9",
            Precio = 1925000
        },
        [10] = {
            IDMueble = 1753,
            Nombre = "Sofa 10",
            Precio = 1050000
        },
        [11] = {
            IDMueble = 1713,
            Nombre = "Sofa 11",
            Precio = 1635000
        },
        [12] = {
            IDMueble = 1712,
            Nombre = "Sofa 12",
            Precio = 1744000
        },
        [13] = {
            IDMueble = 1710,
            Nombre = "Sofa 13",
            Precio = 1200000
        },
        [14] = {
            IDMueble = 1709,
            Nombre = "Sofa 14",
            Precio = 1150000
        },
        [15] = {
            IDMueble = 1707,
            Nombre = "Sofa 15",
            Precio = 1650000
        },
        [16] = {
            IDMueble = 1706,
            Nombre = "Sofa 16",
            Precio = 1150000
        },
        [17] = {
            IDMueble = 1703,
            Nombre = "Sofa 17",
            Precio = 1744000
        },
        [18] = {
            IDMueble = 1702,
            Nombre = "Sofa 18",
            Precio = 1150000
        }
    },

    [3] = {
        [1] = {
            IDMueble = 1720,
            Nombre = "Silla 1",
            Precio = 1150000
        },
        [2] = {
            IDMueble = 1739,
            Nombre = "Silla 2",
            Precio = 1150000
        },
        [3] = {
            IDMueble = 1806,
            Nombre = "Silla 3",
            Precio = 1150000
        },
        [4] = {
            IDMueble = 1810,
            Nombre = "Silla 4",
            Precio = 1150000
        },
        [5] = {
            IDMueble = 2125,
            Nombre = "Silla 5",
            Precio = 1744000
        },
        [6] = {
            IDMueble = 2079,
            Nombre = "Silla 6",
            Precio = 1744000
        },
        [7] = {
            IDMueble = 2096,
            Nombre = "Silla 7",
            Precio = 1744000
        },
        [8] = {
            IDMueble = 2120,
            Nombre = "Silla 8",
            Precio = 1150000
        },
        [9] = {
            IDMueble = 2121,
            Nombre = "Silla 9",
            Precio = 1150000
        },
        [10] = {
            IDMueble = 2123,
            Nombre = "Silla 10",
            Precio = 1150000
        },
        [11] = {
            IDMueble = 2124,
            Nombre = "Silla 11",
            Precio = 1150000
        },
        [12] = {
            IDMueble = 1671,
            Nombre = "Silla 12",
            Precio = 1150000
        },
        [13] = {
            IDMueble = 1714,
            Nombre = "Silla 13",
            Precio = 1150000
        },
        [14] = {
            IDMueble = 1715,
            Nombre = "Silla 14",
            Precio = 1250000
        },
        [15] = {
            IDMueble = 1722,
            Nombre = "Silla 15",
            Precio = 1250000
        },
        [16] = {
            IDMueble = 2350,
            Nombre = "Silla 16",
            Precio = 1250000
        },
        [17] = {
            IDMueble = 1663,
            Nombre = "Silla 17",
            Precio = 1250000
        },
        [18] = {
            IDMueble = 2636,
            Nombre = "Silla 18",
            Precio = 1250000
        },
        [19] = {
            IDMueble = 2788,
            Nombre = "Silla 19",
            Precio = 1745000
        },
        [20] = {
            IDMueble = 1735,
            Nombre = "Sillón 1",
            Precio = 1745000
        },
        [21] = {
            IDMueble = 1754,
            Nombre = "Sillón 2",
            Precio = 1745000
        },
        [22] = {
            IDMueble = 1755,
            Nombre = "Sillón 3",
            Precio = 1745000
        },
        [23] = {
            IDMueble = 1758,
            Nombre = "Sillón 4",
            Precio = 1250000
        },
        [24] = {
            IDMueble = 1759,
            Nombre = "Sillón 5",
            Precio = 1250000
        },
        [25] = {
            IDMueble = 1762,
            Nombre = "Sillón 6",
            Precio = 1250000
        },
        [26] = {
            IDMueble = 1765,
            Nombre = "Sillón 7",
            Precio = 1250000
        },
        [27] = {
            IDMueble = 1767,
            Nombre = "Sillón 8",
            Precio = 1250000
        },
        [28] = {
            IDMueble = 1769,
            Nombre = "Sillón 9",
            Precio = 1250000
        },
        [29] = {
            IDMueble = 2291,
            Nombre = "Sillón 10",
            Precio = 1250000
        },
        [30] = {
            IDMueble = 2292,
            Nombre = "Sillón 11",
            Precio = 1250000
        },
        [31] = {
            IDMueble = 1704,
            Nombre = "Sillón 12",
            Precio = 1250000
        },
        [32] = {
            IDMueble = 1727,
            Nombre = "Sillón 13",
            Precio = 1250000
        }
    },

    [4] = {
        [1] = {
            IDMueble = 1518,
            Nombre = "TV 1",
            Precio = 1650000
        },
        [2] = {
            IDMueble = 1747,
            Nombre = "TV 2",
            Precio = 1650000
        },
        [3] = {
            IDMueble = 1748,
            Nombre = "TV 3",
            Precio = 3650000
        },
        [4] = {
            IDMueble = 1749,
            Nombre = "TV 4",
            Precio = 2650000
        },
        [5] = {
            IDMueble = 1750,
            Nombre = "TV 5",
            Precio = 2650000
        },
        [6] = {
            IDMueble = 1751,
            Nombre = "TV 6",
            Precio = 1950000
        },
        [7] = {
            IDMueble = 1752,
            Nombre = "TV 7",
            Precio = 1680000
        },
        [8] = {
            IDMueble = 1781,
            Nombre = "TV 8",
            Precio = 1680000
        },
        [9] = {
            IDMueble = 1786,
            Nombre = "TV 9",
            Precio = 3650000
        }
    },

    [5] = {
        [1] = {
            IDMueble = 1208,
            Nombre = "Lavadora",
            Precio = 1680000
        },
        [2] = {
            IDMueble = 2514,
            Nombre = "WC",
            Precio = 1680000
        },
        [3] = {
            IDMueble = 2690,
            Nombre = "Extintor",
            Precio = 1680000
        },
        [4] = {
            IDMueble = 2099,
            Nombre = "Radio 1",
            Precio = 1680000
        },
        [5] = {
            IDMueble = 1886,
            Nombre = "Camara de Seguridad 1",
            Precio = 1680000
        },
        [6] = {
            IDMueble = 2100,
            Nombre = "Radio 2",
            Precio = 1680000
        },
        [7] = {
            IDMueble = 2112,
            Nombre = "Mesa mediana",
            Precio = 1000000
        },
        [8] = {
            IDMueble = 2162,
            Nombre = "Estanteria de libros",
            Precio = 1000000
        },
        [9] = {
            IDMueble = 2451,
            Nombre = "Plancha de cocina",
            Precio = 1000000
        },
        [10] = {
            IDMueble = 1742,
            Nombre = "Estanteria de libros 2",
            Precio = 1000000
        },
        [11] = {
            IDMueble = 2109,
            Nombre = "Mesa redonda",
            Precio = 1000000
        },
        [12] = {
            IDMueble = 2534,
            Nombre = "Heladera",
            Precio = 1000000
        },
        [13] = {
            IDMueble = 2574,
            Nombre = "Mesa doble chica",
            Precio = 1000000
        },
        [14] = {
            IDMueble = 2570,
            Nombre = "Mesa chica con tv",
            Precio = 1000000
        },
        [15] = {
            IDMueble = 15037,
            Nombre = "Mesa mediana con tv",
            Precio = 1000000
        },
        [16] = {
            IDMueble = 2572,
            Nombre = "Dos sillones",
            Precio = 1000000
        },
        [17] = {
            IDMueble = 2617,
            Nombre = "Sillas con mesa chica",
            Precio = 1000000
        },
        [18] = {
            IDMueble = 1824,
            Nombre = "Tabla casino",
            Precio = 1000000
        },
        [19] = {
            IDMueble = 2964,
            Nombre = "Mesa pool",
            Precio = 1000000
        },
        [20] = {
            IDMueble = 2017,
            Nombre = "Cocina",
            Precio = 1000000
        },
        [21] = {
            IDMueble = 2069,
            Nombre = "Lampara",
            Precio = 1000000
        },
        [22] = {
            IDMueble = 2360,
            Nombre = "Freezer",
            Precio = 1000000
        },
        [23] = {
            IDMueble = 2413,
            Nombre = "Estante chico",
            Precio = 1000000
        },
        [24] = {
            IDMueble = 1738,
            Nombre = "Calentador",
            Precio = 1000000
        },
        [25] = {
            IDMueble = 2103,
            Nombre = "Parlantes",
            Precio = 1000000
        },
        [26] = {
            IDMueble = 2832,
            Nombre = "Platos y tazas",
            Precio = 1000000
        },
        [27] = {
            IDMueble = 1736,
            Nombre = "Cabeza de ciervo",
            Precio = 1000000
        },
        [28] = {
            IDMueble = 2421,
            Nombre = "Microondas",
            Precio = 1000000
        },
        [29] = {
            IDMueble = 2812,
            Nombre = "Platos",
            Precio = 1000000
        },
        [30] = {
            IDMueble = 1670,
            Nombre = "Botellas y cenizero",
            Precio = 1000000
        },
        [31] = {
            IDMueble = 2257,
            Nombre = "Panel de colores",
            Precio = 1000000
        },
        [32] = {
            IDMueble = 2008,
            Nombre = "Mesa con PC",
            Precio = 1000000
        },
        [33] = {
            IDMueble = 1502,
            Nombre = "Puerta de madera",
            Precio = 1000000
        },
        [34] = {
            IDMueble = 2448,
            Nombre = "Estanteria negocio 1",
            Precio = 1000000
        },
        [35] = {
            IDMueble = 1963,
            Nombre = "Mesa blanca",
            Precio = 1000000
        },
        [36] = {
            IDMueble = 2184,
            Nombre = "Mesa escritorio",
            Precio = 1000000
        },
        [37] = {
            IDMueble = 1828,
            Nombre = "Alfombra leon",
            Precio = 1000000
        },
        [38] = {
            IDMueble = 1845,
            Nombre = "Estanteria negocio 2",
            Precio = 1000000
        },
        [39] = {
            IDMueble = 1887,
            Nombre = "Estanteria negocio 3",
            Precio = 1000000
        },
        [40] = {
            IDMueble = 2583,
            Nombre = "Estanteria negocio 4",
            Precio = 1000000
        },
        [41] = {
            IDMueble = 1958,
            Nombre = "Mesa de DJ",
            Precio = 1000000
        },
        [42] = {
            IDMueble = 2813,
            Nombre = "Libros",
            Precio = 1000000
        },
        [43] = {
            IDMueble = 2392,
            Nombre = "Perchas con ropa",
            Precio = 1000000
        },
        [44] = {
            IDMueble = 2271,
            Nombre = "Cuadro 1",
            Precio = 1000000
        },
        [45] = {
            IDMueble = 2941,
            Nombre = "Caja registradora",
            Precio = 1000000
        },
        [46] = {
            IDMueble = 1895,
            Nombre = "Ruleta",
            Precio = 1000000
        },
        [47] = {
            IDMueble = 2286,
            Nombre = "Cuadro 2",
            Precio = 1000000
        },
        [48] = {
            IDMueble = 2289,
            Nombre = "Cuadro 3",
            Precio = 1000000
        },
        [49] = {
            IDMueble = 2267,
            Nombre = "Cuadro 4",
            Precio = 1000000
        },
        [50] = {
            IDMueble = 2818,
            Nombre = "Alfombra cuadrados",
            Precio = 1000000
        },
        [51] = {
            IDMueble = 2169,
            Nombre = "Escritorio",
            Precio = 1000000
        },
        [52] = {
            IDMueble = 2737,
            Nombre = "Pizarra",
            Precio = 1000000
        },
        [53] = {
            IDMueble = 2872,
            Nombre = "Maquina Arcade",
            Precio = 1000000
        }
    },

    [6] = {
        [1] = {
            IDMueble = 2629,
            Nombre = "Barra de pesas",
            Precio = 1000000
        },
        [2] = {
            IDMueble = 2630,
            Nombre = "Bicicleta estática",
            Precio = 1000000
        }
    },

    [8] = {
        [1] = {
            IDMueble = 2337,
            Nombre = "Cocina 1",
            Precio = 1000000
        },
        [2] = {
            IDMueble = 2529,
            Nombre = "Refrigerador 1",
            Precio = 1000000
        }
    }
}
-- Pesas ID 3071 y 3072 desactivadas hasta futura implementación.				
function getInfoIDMueble(IDMueble)
    if IDMueble then
        for i = 0, 6 do
            for k, v in ipairs(tiendaMuebles[i]) do
                if tostring(v.IDMueble) == tostring(IDMueble) then
                    return tostring(v.Nombre), tostring(v.Precio), tonumber(i)
                end
            end
        end
    end
end

addEvent("displaymuebles", true)
addEventHandler("displaymuebles", getRootElement(), function(categoria)
    if source and client and source == client then
        if categoria == 7 then
            local misMuebles = {}
            exports.items:load(client, true)
            local itemT = exports.items:get(client)
            for k, v in ipairs(itemT) do
                if tonumber(v.item) == 27 then
                    local Nombre, Precio = getInfoIDMueble(tonumber(v.value))
                    tLoc = {}
                    tLoc["IDMueble"] = tonumber(v.value)
                    tLoc["Nombre"] = tostring(Nombre)
                    tLoc["Precio"] = tostring(Precio)
                    table.insert(misMuebles, tLoc)
                end
            end
            triggerClientEvent(client, "displayMuebleOn", client, misMuebles, 7)
        else
            triggerClientEvent(client, "displayMuebleOn", client, tiendaMuebles[categoria], categoria)
        end
    end
end)

function quitarMuebleFromIDMueble(player, IDMueble)
    if player and IDMueble then
        local itemP = exports.items:get(player)
        for k, v in ipairs(itemP) do
            if tonumber(v.item) == 27 and tonumber(v.value) == tonumber(IDMueble) then
                if exports.items:take(player, k) then
                    return true
                end
            end
        end
    end
end

function gestionarMueble(IDMueble, tipo)
    if IDMueble and tipo and source and client and source == client then
        local Nombre, Precio, Categoria = getInfoIDMueble(tonumber(IDMueble))
        if tipo == 1 then -- Comprar el mueble.
            if exports.players:takeMoney(source, tonumber(Precio)) then
                outputChatBox("Has comprado el mueble " .. tostring(Nombre) .. " por " .. tostring(Precio) .. "$.",
                    source, 0, 255, 0)
                outputChatBox("Pulsa en Mis Muebles para poder colocarlo a tu gusto.", source, 0, 255, 0)
                exports.items:give(source, 27, tonumber(IDMueble), tostring(Nombre))
            else
                outputChatBox(
                    "¡No tienes los " .. tostring(Precio) .. "$ para comprar el mueble " .. tostring(Nombre) .. "!",
                    source, 255, 0, 0)
            end
        elseif tipo == 3 then -- Colocar el mueble
            if quitarMuebleFromIDMueble(source, tonumber(IDMueble)) then
                triggerEvent("onCrearMueble", source, source, tonumber(IDMueble))
            end
        elseif tipo == 4 then -- Vender el mueble
            local Nombre, Precio, Categoria = getInfoIDMueble(tonumber(IDMueble))
            if quitarMuebleFromIDMueble(source, tonumber(IDMueble)) then
                outputChatBox(
                    "Has vendido el mueble " .. tostring(Nombre) .. " por " .. tostring(tonumber(Precio / 2)) .. "$.",
                    source, 0, 255, 0)
                exports.players:giveMoney(source, tonumber(Precio / 2))
            else
                outputChatBox("¡No tienes ese mueble para poder venderlo!", source, 255, 0, 0)
            end
        end
    end
end
addEvent("onGestionMueble", true)
addEventHandler("onGestionMueble", getRootElement(), gestionarMueble)

-- ABRIR GUI MUEBLES
-- triggerClientEvent(hitElement,"showTiendaMuebles",hitElement)
